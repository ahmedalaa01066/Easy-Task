<div class="candidates-table-container">
    <!-- Table Header -->
    <div class="table-header">
        <h3 class="table-title">Permissions</h3>
    </div>

    <!-- Data Table -->
    <p-table [value]="permissions" [paginator]="true" [rows]="rows" [totalRecords]="totalRecords" [first]="first"
        responsiveLayout="stack" (onPage)="onPageChange($event)" [scrollable]="true" scrollHeight="600px"
        [tableStyle]="{ 'min-width': '40rem' }" [showCurrentPageReport]="true"
        [currentPageReportTemplate]="'Page {currentPage} of {totalPages}'" styleClass="candidates-table">
        <!-- Table Header -->
        <ng-template pTemplate="header">
            <tr>
                <th id="candidate-col">Candidate Name</th>
                <th id="permissions-col">Permissions Level</th>
                <th id="actions-col"></th>
            </tr>
        </ng-template>

        <!-- Table Body -->
        <ng-template pTemplate="body" let-item>
            <tr>
                <!-- Candidate Name -->
                <td class="candidate-info">
                    <div class="candidate-cell">

                        <div class="candidate-details">
                            <div class="candidate-name">{{ item.candidateName }}</div>
                        </div>
                    </div>
                </td>

                <!-- Permissions -->
                <td id="permissions-cell">
                    <span class="permissions-text">
                        <!-- لو All Permissions -->
                        <ng-container *ngIf="item.isAllPermissions; else normalPermission">
                            <span class="all-permissions">{{ item.permissions }}</span>
                        </ng-container>

                        <!-- لو مش All Permissions -->
                        <ng-template #normalPermission>
                            <span [innerHTML]="formatPermissions(item.permissions)"></span>
                        </ng-template>
                    </span>
                </td>


                <!-- Actions -->
                <td class="actions-cell">
                    <i class="pi pi-pencil action-icon" (click)="editPermission(item)"></i>
                    <i class="pi pi-trash action-icon" (click)="deletePermission(item)"></i>
                </td>


            </tr>
        </ng-template>

        <!-- Empty State -->
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="3" class="empty-message">
                    <div class="empty-state">
                        <i class="pi pi-ban empty-icon"></i>
                        <p>No permissions found</p>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>