<p-dialog header="Send Request" [(visible)]="visible" [modal]="true" [closable]="true" [draggable]="false"
  [resizable]="false" [style]="{ width: '600px', minHeight: '500px' }" styleClass="add-candidate-dialog"
  (onHide)="onDialogHide()"
>
  <div class="candidate-form">

    <!-- Request Form (لو التاب الخارجي Annual أو WorkFromHome) -->
    <form *ngIf="activeOuterTab !== candidateRequestType.Permission_Request"
          [formGroup]="requestForm">
      <div class="form-field">
        <label for="requestType">Request</label>
        <p-dropdown id="requestType" [options]="vacations" optionLabel="name" optionValue="id"
          placeholder="Select Request" class="dropdown-input" formControlName="vacationId"></p-dropdown>
      </div>

      <div class="form-field">
        <label for="fromDate">From Date</label>
        <p-calendar id="fromDate" formControlName="fromDate" placeholder="dd-mm-yy" dateFormat="dd-mm-yy"
          class="calendar-input"></p-calendar>
      </div>

      <div class="form-field">
        <label for="toDate">To Date</label>
        <p-calendar id="toDate" formControlName="toDate" placeholder="dd-mm-yy" dateFormat="dd-mm-yy"
          class="calendar-input"   appendTo="body"></p-calendar>
        <div *ngIf="requestForm.errors?.dateInvalid" class="error-text">
          To Date must be equal or after From Date
        </div>
      </div>
    </form>

    <!-- Permission Form (لو التاب الخارجي Permission) -->
    <form *ngIf="activeOuterTab === candidateRequestType.Permission_Request"
          [formGroup]="permissionForm">
      <div class="form-field">
        <label for="permissionType">Permission</label>
        <p-dropdown id="permissionType" [options]="permissions" optionLabel="name" optionValue="id"
          placeholder="Select Permission" class="dropdown-input" formControlName="permissionId"></p-dropdown>
      </div>

      <div class="form-field">
        <label for="date">Date</label>
        <p-calendar id="date" formControlName="date" [minDate]="minDate" placeholder="dd-mm-yy" dateFormat="dd-mm-yy"
          class="calendar-input"></p-calendar>
      </div>

      <div class="form-row">
        <div class="form-field flex-item">
          <label for="fromTime">From Time</label>
          <p-calendar id="fromTime" formControlName="fromTime" placeholder="HH:mm" timeOnly="true"
            class="calendar-input"></p-calendar>
        </div>

        <div class="form-field flex-item">
          <label for="toTime">To Time</label>
          <p-calendar id="toTime" formControlName="toTime" timeOnly="true" placeholder="HH:mm"
            class="calendar-input"></p-calendar>
          <div *ngIf="permissionForm.errors?.timeInvalid" class="error-text">
            To Time must be after From Time
          </div>
        </div>
      </div>
    </form>
  </div>

  <!-- Footer -->
  <ng-template pTemplate="footer">
    <div class="dialog-footer">
      <p-button label="Cancel" [text]="true" severity="secondary" (click)="onDialogHide()"
        class="cancel-btn px-2"></p-button>
      <p-button label="Save" severity="primary" (click)="saveRequest()" class="save-btn"></p-button>
    </div>
  </ng-template>
</p-dialog>
