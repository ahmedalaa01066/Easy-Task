<p-dialog [(visible)]="visible" [modal]="true" [closable]="true" [draggable]="false" [resizable]="false"
    styleClass="add-candidate-dialog" header="Add New Management" [style]="{ width: '600px', minHeight: '600px' }"
    (onHide)="onDialogHide()">


    <!-- Form Content -->
    <form [formGroup]="managementForm" class="candidate-form">
        <div class="form-field ">
            <label for="name"> Management Name<span class="error-message">*</span></label>
            <input id="name" type="text" pInputText formControlName="name" placeholder="Management name"
                class="form-input" />
            <small *ngIf="managementForm.get('name')?.invalid && managementForm.get('name')?.touched"
                class="error-message">
                Name is required (min 2 characters)
            </small>

            <!-- Manager -->
            <div class="form-group mt-3">
                <label class="form-label">Manager<span class="error-message">*</span></label>
                <!-- <p-dropdown [options]="managers" formControlName="managerId" optionLabel="name" optionValue="id"
                    placeholder="Select a manager" [showClear]="true"></p-dropdown> -->


                <p-dropdown id="managerId" formControlName="managerId" [options]="managers" optionLabel="name"
                    optionValue="id" placeholder="Select Manager" class="form-input dropdown-input">
                </p-dropdown>
                <small *ngIf="managementForm.get('managerId')?.invalid && managementForm.get('managerId')?.touched"
                    class="error-message">
                    Manager is required
                </small>
            </div>

            <div formArrayName="departments">
                <div *ngFor="let dept of departmentsFormArray.controls; let i = index" class="mx-3">
                    <label class="form-label">Department Name</label>
                    <input class="form-control" [formControlName]="i" placeholder="Department name" />
                </div>
            </div>




            <a href="#" (click)="addDepartment(); $event.preventDefault()" class="assign-link mt-2">
                <i class="bi bi-plus-circle "></i><img src="assets/images/plus-circle.png" class="mx-1">
                Assign department
            </a>
        </div>
    </form>

    <!-- Dialog Footer -->
    <ng-template pTemplate="footer">
        <div class="dialog-footer">
            <div class="footer-right">
                <p-button label="Cancel" [text]="true" severity="secondary" (onClick)="cancel()" class="cancel-btn">
                </p-button>

                <p-button label="Save" severity="primary" (onClick)="onSubmit()" class="save-btn">
                </p-button>
            </div>
        </div>
    </ng-template>
</p-dialog>